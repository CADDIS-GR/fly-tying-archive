<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”Œë¼ì´ íƒ€ì´ë‹ ë§ˆìŠ¤í„° í´ë˜ìŠ¤: Air Bubble & Hot Spot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; transition: background-color 0.5s ease, color 0.5s ease; }
        
        /* UV ëª¨ë“œ ì „ìš© ìŠ¤íƒ€ì¼ */
        .uv-mode { background-color: #1a1a2e; color: #e0e0e0; }
        .uv-mode .uv-text-green { color: #39FF14; text-shadow: 0 0 10px #39FF14; }
        .uv-mode .uv-text-white { color: #ffffff; text-shadow: 0 0 15px #00ffff; }
        .uv-mode .card { background-color: #16213e; border-color: #39FF14; }
        
        /* ê¸°í¬ ì§ˆê° ì‹œë®¬ë ˆì´ì…˜ */
        .bubble-texture {
            background-color: #e0f2fe;
            background-image: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.8) 10%, transparent 10%),
                              radial-gradient(circle at 20% 30%, rgba(255,255,255,0.8) 5%, transparent 5%);
            background-size: 10px 10px;
            box-shadow: inset 0 0 10px rgba(0,166,255,0.2);
        }
        
        /* ì°¨íŠ¸ ì»¨í…Œì´ë„ˆ ì œì•½ */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        /* UV í† ê¸€ ìŠ¤ìœ„ì¹˜ */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #39FF14;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #39FF14;
        }
        
        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        .animate-float { animation: float 3s ease-in-out infinite; }

        /* ===========================
           íŒ¨í„´ ê°¤ëŸ¬ë¦¬ ìŠ¤íƒ€ì¼
        =========================== */
        .pattern-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        /* ê°¤ëŸ¬ë¦¬ ì¹´ë“œ */
        .gallery-card {
            position: relative;
            border-radius: 1rem;
            overflow: hidden;
            cursor: zoom-in;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            transition: transform 0.3s cubic-bezier(.34,1.56,.64,1), box-shadow 0.3s ease, border-color 0.3s ease;
            aspect-ratio: 1 / 1;
        }
        .gallery-card:hover {
            transform: translateY(-6px) scale(1.03);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: #38bdf8;
        }

        /* UV ëª¨ë“œì—ì„œ ì¹´ë“œ íš¨ê³¼ */
        .uv-mode .gallery-card {
            border-color: #1e3a4a;
            background: #0f172a;
        }
        .uv-mode .gallery-card:hover {
            border-color: #39FF14;
            box-shadow: 0 0 30px rgba(57,255,20,0.3);
        }

        /* ì´ë¯¸ì§€ ì¤Œ íš¨ê³¼ */
        .gallery-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(.25,.46,.45,.94);
            display: block;
        }
        .gallery-card:hover img {
            transform: scale(1.08);
        }

        /* ì¹´ë“œ ì˜¤ë²„ë ˆì´ */
        .gallery-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.75) 0%, transparent 55%);
            opacity: 0;
            transition: opacity 0.35s ease;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 1rem;
        }
        .gallery-card:hover .gallery-overlay {
            opacity: 1;
        }
        .gallery-overlay-title {
            color: #fff;
            font-weight: 700;
            font-size: 1rem;
            line-height: 1.3;
            text-shadow: 0 1px 4px rgba(0,0,0,0.5);
        }
        .gallery-overlay-badge {
            display: inline-block;
            margin-top: 0.3rem;
            background: rgba(56,189,248,0.85);
            color: #fff;
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            padding: 0.15rem 0.6rem;
            border-radius: 999px;
        }
        /* UV ëª¨ë“œ ì˜¤ë²„ë ˆì´ ìƒ‰ìƒ */
        .uv-mode .gallery-overlay-badge {
            background: rgba(57,255,20,0.85);
            color: #0f172a;
        }

        /* í™•ëŒ€ ì•„ì´ì½˜ */
        .gallery-zoom-icon {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0.7);
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(.34,1.56,.64,1);
            font-size: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .gallery-card:hover .gallery-zoom-icon {
            opacity: 1;
            transform: scale(1);
        }

        /* ===========================
           Lightbox ìŠ¤íƒ€ì¼
        =========================== */
        #lightbox {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(5, 10, 20, 0.92);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            align-items: center;
            justify-content: center;
            animation: lbFadeIn 0.25s ease;
        }
        #lightbox.active { display: flex; }
        @keyframes lbFadeIn {
            from { opacity: 0; }
            to   { opacity: 1; }
        }

        #lightbox-inner {
            position: relative;
            max-width: 90vw;
            max-height: 88vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: lbSlideUp 0.3s cubic-bezier(.34,1.56,.64,1);
        }
        @keyframes lbSlideUp {
            from { transform: translateY(24px) scale(0.96); opacity:0; }
            to   { transform: translateY(0) scale(1); opacity:1; }
        }

        #lightbox-img {
            max-width: 80vw;
            max-height: 75vh;
            object-fit: contain;
            border-radius: 1rem;
            box-shadow: 0 30px 80px rgba(0,0,0,0.6);
            display: block;
        }

        #lightbox-caption {
            margin-top: 1rem;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: 0.02em;
        }
        #lightbox-sub {
            margin-top: 0.25rem;
            color: #94a3b8;
            font-size: 0.8rem;
            text-align: center;
        }

        #lightbox-close {
            position: absolute;
            top: -2.5rem;
            right: 0;
            width: 2.25rem;
            height: 2.25rem;
            border-radius: 50%;
            background: rgba(255,255,255,0.12);
            border: 1.5px solid rgba(255,255,255,0.25);
            color: #fff;
            font-size: 1.1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, transform 0.2s;
        }
        #lightbox-close:hover {
            background: rgba(239,68,68,0.6);
            transform: rotate(90deg);
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ */
        .lb-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 1.5px solid rgba(255,255,255,0.2);
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s, transform 0.2s;
            z-index: 10;
        }
        #lb-prev { left: -3.5rem; }
        #lb-next { right: -3.5rem; }
        .lb-nav-btn:hover {
            background: rgba(56,189,248,0.4);
            transform: translateY(-50%) scale(1.1);
        }

        /* UV ëª¨ë“œ lightbox */
        .uv-mode #lightbox { background: rgba(0,5,20,0.95); }
        .uv-mode #lightbox-caption { color: #39FF14; text-shadow: 0 0 12px #39FF14; }

        /* ì„¹ì…˜ ì œëª© êµ¬ë¶„ì„  íš¨ê³¼ */
        .section-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2.5rem;
        }
        .section-divider::before, .section-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(to right, transparent, #cbd5e1);
        }
        .section-divider::after {
            background: linear-gradient(to left, transparent, #cbd5e1);
        }

        @media (max-width: 640px) {
            .pattern-gallery { grid-template-columns: 1fr; }
            #lb-prev { left: -2.5rem; }
            #lb-next { right: -2.5rem; }
            #lightbox-img { max-width: 92vw; }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 transition-colors duration-500" id="appBody">

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="sticky top-0 z-50 backdrop-blur-md bg-white/80 border-b border-slate-200" id="navBar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-black tracking-tighter text-slate-900" id="logoText">FLY LAB</span>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm font-bold text-slate-500" id="uvLabel">UV LAMP</span>
                    <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                        <input type="checkbox" name="toggle" id="uvToggle" class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 transition-all duration-300 ease-in-out"/>
                        <label for="uvToggle" class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-300 cursor-pointer transition-colors duration-300"></label>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- íˆì–´ë¡œ ì„¹ì…˜ -->
    <header class="relative overflow-hidden pt-16 pb-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl md:text-6xl font-black mb-6 tracking-tight">
                <span class="block">Air Bubble &</span>
                <span class="block text-emerald-500 transition-colors duration-300" id="heroAccent">Hot Spot</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-600" id="heroDesc">
                ê´€ë¦¬í˜• ì €ìˆ˜ì§€ ì†¡ì–´ë¥¼ ìœ í˜¹í•˜ëŠ” ê°€ì¥ ì§§ê³  ê°•ë ¥í•œ ê³µì‹.<br>
                ìƒë¬¼í•™ì  ëª¨ë°©ê³¼ ì‹œê°ì  ìê·¹ì˜ ì™„ë²½í•œ ì¡°í™”ë¥¼ ê²½í—˜í•˜ì„¸ìš”.
            </p>
        </div>
    </header>

    <!-- ì„¹ì…˜ 1: ê°œë… ì„¤ëª… -->
    <section id="concepts" class="py-12 bg-white transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Air Bubble Card -->
                <div class="card p-8 rounded-2xl bg-slate-50 border border-slate-100 hover:shadow-xl transition-all duration-300 cursor-pointer group" onclick="toggleDetails('bubbleDetails')">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-2xl animate-float">ğŸ«§</div>
                        <span class="text-sm font-bold text-blue-500 uppercase tracking-wide">Biology</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 group-hover:text-blue-600 transition-colors">1. Air Bubble (ê¸°í¬)</h3>
                    <p class="text-slate-600 mb-4">"ì‚´ì•„ìˆëŠ” ë¨¹ì´"ë¼ëŠ” ê°€ì¥ í™•ì‹¤í•œ ì‹ í˜¸.</p>
                    <div id="bubbleDetails" class="hidden text-slate-600 text-sm bg-white p-4 rounded-lg shadow-inner border border-slate-100 mt-4">
                        <ul class="space-y-2">
                            <li><strong>ğŸ”¬ ìƒë¬¼í•™ì  ì˜ë¯¸:</strong> ìš°í™”ë¥¼ ìœ„í•´ ìˆ˜ë©´ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” ìˆ˜ì¤‘ ìƒëª…ì²´ê°€ ë¨¸ê¸ˆì€ ê°€ìŠ¤ ë°©ìš¸ì„ ëª¨ë°©í•˜ì—¬ ìƒë™ê°ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</li>
                            <li><strong>âœ¨ ì‹œê°ì  íš¨ê³¼:</strong> ëŒê¸°ë“¤ì´ ë¹›ì„ ë‚œë°˜ì‚¬ì‹œì¼œ ì‹¤ì œ ê¸°í¬ì™€ ê°™ì€ ë°˜ì§ì„ì„ ë§Œë“­ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                </div>

                <!-- Hot Spot Card -->
                <div class="card p-8 rounded-2xl bg-slate-50 border border-slate-100 hover:shadow-xl transition-all duration-300 cursor-pointer group" onclick="toggleDetails('hotspotDetails')">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl animate-pulse">ğŸ¯</div>
                        <span class="text-sm font-bold text-green-500 uppercase tracking-wide">Trigger</span>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 group-hover:text-green-600 transition-colors">2. Hot Spot (í•«ìŠ¤íŒŸ)</h3>
                    <p class="text-slate-600 mb-4">ê³µê²© ë³¸ëŠ¥ì„ ê¹¨ìš°ëŠ” ëª…í™•í•œ ì‹œê°ì  íƒ€ê²Ÿ.</p>
                    <div id="hotspotDetails" class="hidden text-slate-600 text-sm bg-white p-4 rounded-lg shadow-inner border border-slate-100 mt-4">
                        <ul class="space-y-2">
                            <li><strong>ğŸ”¦ ê¸°ëŠ¥ì  ì˜ë¯¸:</strong> íƒí•œ ë¬¼ìƒ‰ì´ë‚˜ ê¹Šì€ ìˆ˜ì‹¬ì—ì„œ í”Œë¼ì´ì˜ ìœ„ì¹˜ë¥¼ ë…¸ì¶œì‹œí‚µë‹ˆë‹¤.</li>
                            <li><strong>â˜¢ï¸ UV íš¨ê³¼:</strong> ë„¤ì˜¨ ì»¬ëŸ¬ ë„ë£ŒëŠ” UV ì¡°ì‚¬ ì‹œ í­ë°œì ì¸ ë°œê´‘ìœ¼ë¡œ ê³µê²©ì„ ìœ ë„í•©ë‹ˆë‹¤.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ì„¹ì…˜ 2: ì‹œë®¬ë ˆì´í„° ì‹¤í—˜ì‹¤ -->
    <section id="lab" class="py-20 bg-slate-50 transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <span class="bg-slate-900 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-2 inline-block">Interactive Simulator</span>
                <h2 class="text-3xl font-bold mb-4">í”Œë¼ì´ ì‹œë„ˆì§€ ì—°êµ¬ì†Œ</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto" id="labDesc">
                    ì¬ë£Œ ì¡°í•©ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ì„±ëŠ¥ ì§€í‘œë¥¼ ì‹¤í—˜í•´ë³´ì„¸ìš”.
                </p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8 items-start">
                <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
                <div class="bg-white p-6 rounded-2xl border border-slate-200 lg:col-span-1 card shadow-sm">
                    <h3 class="text-lg font-bold mb-6 border-b pb-2 border-slate-100">ì¬ë£Œ ì„ íƒ</h3>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-bold text-slate-700 mb-2">ë°”ë”” ì¬ë£Œ</label>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="setBody('standard')" id="btnBodyStd" class="p-3 text-sm rounded-lg border-2 border-slate-200 hover:border-slate-400 font-medium transition-all text-center">ì¼ë°˜ ì‹¤</button>
                            <button onclick="setBody('bubble')" id="btnBodyBub" class="p-3 text-sm rounded-lg border-2 border-blue-400 bg-blue-50 text-blue-700 font-bold transition-all text-center">ë²„ë¸” ë‹·</button>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-bold text-slate-700 mb-2">í—¤ë“œ/í•«ìŠ¤íŒŸ (UV ë¬¼ê°)</label>
                        <div class="space-y-2">
                            <button onclick="setHead('none')" id="btnHeadNone" class="w-full p-3 text-sm rounded-lg border-2 border-slate-200 hover:border-slate-400 font-medium transition-all text-left flex items-center">
                                <span class="w-4 h-4 rounded-full bg-slate-300 mr-3"></span> ì—†ìŒ
                            </button>
                            <button onclick="setHead('green')" id="btnHeadGreen" class="w-full p-3 text-sm rounded-lg border-2 border-green-200 hover:border-green-400 font-medium transition-all text-left flex items-center">
                                <span class="w-4 h-4 rounded-full bg-[#39FF14] mr-3 border border-slate-200 shadow-[0_0_5px_#39FF14]"></span> ë„¤ì˜¨ ê·¸ë¦°
                            </button>
                            <button onclick="setHead('white')" id="btnHeadWhite" class="w-full p-3 text-sm rounded-lg border-2 border-blue-100 hover:border-blue-300 font-medium transition-all text-left flex items-center">
                                <span class="w-4 h-4 rounded-full bg-white mr-3 border border-slate-200 shadow-[0_0_5px_cyan]"></span> ë„¤ì˜¨ í™”ì´íŠ¸
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ì‹œê°í™” ì˜ì—­ -->
                <div class="lg:col-span-2 grid md:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 flex flex-col items-center justify-center min-h-[350px] relative overflow-hidden card transition-colors duration-500" id="previewContainer">
                        <div class="absolute top-4 left-4 text-xs font-bold uppercase text-slate-400 tracking-widest">Visual Preview</div>
                        <div class="relative w-64 h-32 transform transition-all duration-500 hover:scale-105">
                            <!-- Hook -->
                            <div class="absolute top-1/2 left-0 w-48 h-24 border-b-4 border-r-4 border-slate-400 rounded-br-[4rem]" style="border-radius: 0 0 50px 0;"></div>
                            
                            <!-- Body -->
                            <div id="flyBody" class="absolute top-[45%] left-4 w-36 h-6 rounded-full transition-all duration-500 origin-left" style="background: #94a3b8;"></div>
                            
                            <!-- Head -->
                            <div id="flyHead" class="absolute top-[40%] left-[8.5rem] w-8 h-8 rounded-full transition-all duration-500 z-10 shadow-sm" style="background: transparent;"></div>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-200 card">
                        <div class="chart-container">
                            <canvas id="statsChart"></canvas>
                        </div>
                        <div class="text-center mt-2">
                            <span class="text-2xl font-bold" id="scoreDisplay">0</span>
                            <span class="text-xs uppercase text-slate-400 block">Total Appeal Score</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ===========================
         ì„¹ì…˜ 3: íŒ¨í„´ ì˜ˆì‹œ ê°¤ëŸ¬ë¦¬ (ì‹ ê·œ)
    =========================== -->
    <section id="gallery" class="py-20 bg-white transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

            <div class="text-center mb-12">
                <span class="bg-emerald-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider mb-3 inline-block">Pattern Examples</span>
                <h2 class="text-3xl font-bold mb-3">ì‹¤ì œ íŒ¨í„´ ì•„ì¹´ì´ë¸Œ</h2>
                <p class="text-base text-slate-500 max-w-xl mx-auto">
                    í´ë¦­í•˜ë©´ í™•ëŒ€ ì´ë¯¸ì§€ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <div class="pattern-gallery">
                <!-- ì¹´ë“œ 1: OilPupa -->
                <div class="gallery-card" onclick="openLightbox(0)" title="OilPupa í™•ëŒ€ë³´ê¸°">
                    <img
                        src="https://raw.githubusercontent.com/CADDIS-GR/fly-tying-archive/main/images/OilPupa.jpg"
                        alt="OilPupa íŒ¨í„´"
                        loading="lazy"
                        onerror="this.parentElement.querySelector('.gallery-fallback').style.display='flex'; this.style.display='none';"
                    >
                    <!-- ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨ ì‹œ í´ë°± -->
                    <div class="gallery-fallback" style="display:none; width:100%; height:100%; align-items:center; justify-content:center; flex-direction:column; background:#f1f5f9; color:#94a3b8;">
                        <span style="font-size:2.5rem;">ğŸª°</span>
                        <span style="font-size:0.75rem; margin-top:0.5rem;">OilPupa</span>
                    </div>
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Oil Pupa</div>
                        <span class="gallery-overlay-badge">Air Bubble</span>
                    </div>
                    <div class="gallery-zoom-icon">ğŸ”</div>
                </div>

                <!-- ì¹´ë“œ 2: LeechDot -->
                <div class="gallery-card" onclick="openLightbox(1)" title="LeechDot í™•ëŒ€ë³´ê¸°">
                    <img
                        src="https://raw.githubusercontent.com/CADDIS-GR/fly-tying-archive/main/images/LeechDot.jpg"
                        alt="LeechDot íŒ¨í„´"
                        loading="lazy"
                        onerror="this.parentElement.querySelector('.gallery-fallback').style.display='flex'; this.style.display='none';"
                    >
                    <div class="gallery-fallback" style="display:none; width:100%; height:100%; align-items:center; justify-content:center; flex-direction:column; background:#f1f5f9; color:#94a3b8;">
                        <span style="font-size:2.5rem;">ğŸª°</span>
                        <span style="font-size:0.75rem; margin-top:0.5rem;">LeechDot</span>
                    </div>
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Leech Dot</div>
                        <span class="gallery-overlay-badge">Hot Spot</span>
                    </div>
                    <div class="gallery-zoom-icon">ğŸ”</div>
                </div>

                <!-- ì¹´ë“œ 3: RedDotLarva -->
                <div class="gallery-card" onclick="openLightbox(2)" title="RedDotLarva í™•ëŒ€ë³´ê¸°">
                    <img
                        src="https://raw.githubusercontent.com/CADDIS-GR/tying-recipe/main/photos/RedDotLarva.jpg"
                        alt="RedDotLarva íŒ¨í„´"
                        loading="lazy"
                        onerror="this.parentElement.querySelector('.gallery-fallback').style.display='flex'; this.style.display='none';"
                    >
                    <div class="gallery-fallback" style="display:none; width:100%; height:100%; align-items:center; justify-content:center; flex-direction:column; background:#f1f5f9; color:#94a3b8;">
                        <span style="font-size:2.5rem;">ğŸª°</span>
                        <span style="font-size:0.75rem; margin-top:0.5rem;">RedDotLarva</span>
                    </div>
                    <div class="gallery-overlay">
                        <div class="gallery-overlay-title">Red Dot Larva</div>
                        <span class="gallery-overlay-badge">Air Bubble + Hot Spot</span>
                    </div>
                    <div class="gallery-zoom-icon">ğŸ”</div>
                </div>
            </div>
        </div>
    </section>

    <!-- ===========================
         Lightbox ì˜¤ë²„ë ˆì´ (ì‹ ê·œ)
    =========================== -->
    <div id="lightbox" role="dialog" aria-modal="true" aria-label="ì´ë¯¸ì§€ í™•ëŒ€ë³´ê¸°">
        <div id="lightbox-inner">
            <!-- ë‹«ê¸° ë²„íŠ¼ -->
            <button id="lightbox-close" onclick="closeLightbox()" aria-label="ë‹«ê¸°">âœ•</button>

            <!-- ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
            <button class="lb-nav-btn" id="lb-prev" onclick="lbNavigate(-1)" aria-label="ì´ì „ ì´ë¯¸ì§€">â€¹</button>
            <button class="lb-nav-btn" id="lb-next" onclick="lbNavigate(1)" aria-label="ë‹¤ìŒ ì´ë¯¸ì§€">â€º</button>

            <!-- í™•ëŒ€ ì´ë¯¸ì§€ -->
            <img id="lightbox-img" src="" alt="">

            <!-- ìº¡ì…˜ -->
            <div id="lightbox-caption"></div>
            <div id="lightbox-sub"></div>
        </div>
    </div>

    <!-- ì„¹ì…˜ 4: ì¬ë£Œ ë¹„êµ -->
    <section class="py-20 bg-slate-50 transition-colors duration-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-8">
                <div class="border border-slate-200 rounded-xl p-6 card">
                    <h3 class="text-xl font-bold text-purple-600 mb-2">â‘  Solarez Color UV Resin</h3>
                    <p class="text-sm text-slate-500 mb-4">ì½”íŒ…ê³¼ ë°œìƒ‰ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” í—¤ë“œ ì‹œë©˜íŠ¸ ëŒ€ìš©.</p>
                    <ul class="text-sm space-y-2 text-slate-700">
                        <li>â€¢ íˆ¬ëª… ë ˆì§„ì˜ ê°•ë„ + ì•ˆë£Œì˜ ì„ ëª…í•œ ë°œìƒ‰</li>
                        <li>â€¢ ì–´ë‘ìš´ ìˆ˜ì‹¬ì—ì„œë„ ìœ ì§€ë˜ëŠ” ê°•ë ¥í•œ ì‹œì¸ì„±</li>
                        <li>â€¢ ë¹ ë¥¸ ê²½í™”ë¡œ ì‘ì—… ì‹œê°„ ë‹¨ì¶•</li>
                    </ul>
                </div>
                <div class="border border-slate-200 rounded-xl p-6 card">
                    <h3 class="text-xl font-bold text-emerald-600 mb-2">â‘¡ UV ë¬¼ê° (Neon Series)</h3>
                    <p class="text-sm text-slate-500 mb-4">í˜•ê´‘ ë„ë£Œê°€ í¬í•¨ë˜ì–´ ìì™¸ì„ ì— ì¦‰ê° ë°˜ì‘í•˜ëŠ” íŠ¹ìˆ˜ ë¬¼ê°.</p>
                    <ul class="text-sm space-y-2 text-slate-700">
                        <li>â€¢ <strong>Neon-63(Green), Neon-11(White)</strong> ë“± í•„ìŠ¹ ì»¬ëŸ¬</li>
                        <li>â€¢ ê¸°í¬ì™€ ì•Œì˜ ì§ˆê°ì„ ì‚¬ì‹¤ì ìœ¼ë¡œ í‘œí˜„</li>
                        <li>â€¢ ì¼ë°˜ ì¡°ëª… ì•„ë˜ì™€ UV ì•„ë˜ì—ì„œì˜ ê·¹ëª…í•œ ë°˜ì „</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- í‘¸í„° -->
    <footer class="bg-slate-900 text-slate-300 py-12 transition-colors duration-500" id="footer">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-2xl font-bold text-white mb-2 italic text-emerald-400">"Air Bubbleë¡œ ìƒëª…ë ¥ì„, Hot Spotìœ¼ë¡œ ì¢…ì§€ë¶€ë¥¼."</h2>
            <div class="text-xs text-slate-500 mt-8">Generated by Jeff for ë‚šì‹œëŒ€ì¥.</div>
        </div>
    </footer>

    <script>
        // =============================
        //  ê°¤ëŸ¬ë¦¬ & Lightbox ë°ì´í„°
        // =============================
        const galleryItems = [
            {
                src: 'https://raw.githubusercontent.com/CADDIS-GR/fly-tying-archive/main/images/OilPupa.jpg',
                title: 'Oil Pupa',
                badge: 'Air Bubble'
            },
            {
                src: 'https://raw.githubusercontent.com/CADDIS-GR/fly-tying-archive/main/images/LeechDot.jpg',
                title: 'Leech Dot',
                badge: 'Hot Spot'
            },
            {
                src: 'https://raw.githubusercontent.com/CADDIS-GR/tying-recipe/main/photos/RedDotLarva.jpg',
                title: 'Red Dot Larva',
                badge: 'Air Bubble + Hot Spot'
            }
        ];

        let currentLbIndex = 0;

        function openLightbox(idx) {
            currentLbIndex = idx;
            renderLightbox();
            const lb = document.getElementById('lightbox');
            lb.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function renderLightbox() {
            const item = galleryItems[currentLbIndex];
            const img = document.getElementById('lightbox-img');
            img.src = item.src;
            img.alt = item.title;
            document.getElementById('lightbox-caption').textContent = item.title;
            document.getElementById('lightbox-sub').textContent = item.badge;

            // ë‚´ë¹„ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
            document.getElementById('lb-prev').style.opacity = currentLbIndex > 0 ? '1' : '0.2';
            document.getElementById('lb-next').style.opacity = currentLbIndex < galleryItems.length - 1 ? '1' : '0.2';
            document.getElementById('lb-prev').disabled = currentLbIndex === 0;
            document.getElementById('lb-next').disabled = currentLbIndex === galleryItems.length - 1;
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = '';
        }

        function lbNavigate(dir) {
            const next = currentLbIndex + dir;
            if (next < 0 || next >= galleryItems.length) return;
            currentLbIndex = next;

            // ìŠ¬ë¼ì´ë“œ ì• ë‹ˆë©”ì´ì…˜
            const inner = document.getElementById('lightbox-inner');
            inner.style.transition = 'transform 0.2s ease, opacity 0.2s ease';
            inner.style.opacity = '0';
            inner.style.transform = `translateX(${dir * 30}px)`;
            setTimeout(() => {
                renderLightbox();
                inner.style.transform = `translateX(${-dir * 20}px)`;
                setTimeout(() => {
                    inner.style.transition = 'transform 0.25s cubic-bezier(.34,1.56,.64,1), opacity 0.25s ease';
                    inner.style.opacity = '1';
                    inner.style.transform = 'translateX(0)';
                }, 30);
            }, 180);
        }

        // ë°°ê²½ í´ë¦­ ë‹«ê¸°
        document.getElementById('lightbox').addEventListener('click', function(e) {
            if (e.target === this) closeLightbox();
        });

        // í‚¤ë³´ë“œ ì§€ì›
        document.addEventListener('keydown', function(e) {
            const lb = document.getElementById('lightbox');
            if (!lb.classList.contains('active')) return;
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft')  lbNavigate(-1);
            if (e.key === 'ArrowRight') lbNavigate(1);
        });


        // =============================
        //  ê¸°ì¡´ ì‹œë®¬ë ˆì´í„° ë¡œì§
        // =============================
        const state = { body: 'bubble', head: 'none', uvMode: false };
        const flyStats = {
            standard: { realism: 30, trigger: 20, visibility: 30 },
            bubble:   { realism: 90, trigger: 50, visibility: 60 },
            headNone:  { realism: 0, trigger: 0, visibility: 0 },
            headGreen: { realism: 10, trigger: 90, visibility: 95 },
            headWhite: { realism: 20, trigger: 80, visibility: 90 }
        };

        let radarChart;

        function initChart() {
            const ctx = document.getElementById('statsChart').getContext('2d');
            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ìƒëª…ë ¥', 'ê³µê²© ë³¸ëŠ¥', 'ì‹œì¸ì„±'],
                    datasets: [{
                        label: 'ì§€í‘œ',
                        data: [0, 0, 0],
                        backgroundColor: 'rgba(56, 189, 248, 0.2)',
                        borderColor: 'rgba(56, 189, 248, 1)',
                        pointBackgroundColor: 'rgba(56, 189, 248, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    scales: {
                        r: {
                            suggestedMin: 0, suggestedMax: 100,
                            ticks: { display: false },
                            pointLabels: { font: { weight: 'bold', family: "'Noto Sans KR', sans-serif" } }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        function toggleDetails(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        function setBody(type) {
            state.body = type;
            document.getElementById('btnBodyStd').className = `p-3 text-sm rounded-lg border-2 transition-all text-center ${type === 'standard' ? 'border-blue-400 bg-blue-50 text-blue-700 font-bold' : 'border-slate-200'}`;
            document.getElementById('btnBodyBub').className = `p-3 text-sm rounded-lg border-2 transition-all text-center ${type === 'bubble'   ? 'border-blue-400 bg-blue-50 text-blue-700 font-bold' : 'border-slate-200'}`;
            updateVisuals();
        }

        function setHead(color) {
            state.head = color;
            const base = "w-full p-3 text-sm rounded-lg border-2 transition-all text-left flex items-center";
            document.getElementById('btnHeadNone').className  = `${base} ${color === 'none'  ? 'border-blue-400 bg-blue-50'   : 'border-slate-200'}`;
            document.getElementById('btnHeadGreen').className = `${base} ${color === 'green' ? 'border-green-400 bg-green-50' : 'border-green-100'}`;
            document.getElementById('btnHeadWhite').className = `${base} ${color === 'white' ? 'border-blue-300 bg-blue-50'   : 'border-blue-100'}`;
            updateVisuals();
        }

        function toggleUVMode() {
            state.uvMode = document.getElementById('uvToggle').checked;
            const body = document.getElementById('appBody');
            if (state.uvMode) {
                body.classList.add('uv-mode');
                radarChart.data.datasets[0].borderColor = '#39FF14';
                radarChart.data.datasets[0].backgroundColor = 'rgba(57, 255, 20, 0.2)';
            } else {
                body.classList.remove('uv-mode');
                radarChart.data.datasets[0].borderColor = 'rgba(56, 189, 248, 1)';
                radarChart.data.datasets[0].backgroundColor = 'rgba(56, 189, 248, 0.2)';
            }
            radarChart.update();
            updateVisuals();
        }

        function updateVisuals() {
            const b = state.body === 'bubble' ? flyStats.bubble : flyStats.standard;
            const h = state.head === 'green' ? flyStats.headGreen
                    : state.head === 'white' ? flyStats.headWhite
                    : flyStats.headNone;
            const r = Math.min(100, b.realism    + h.realism);
            const t = Math.min(100, b.trigger    + h.trigger);
            const v = Math.min(100, b.visibility + h.visibility);
            radarChart.data.datasets[0].data = [r, t, v];
            radarChart.update();
            animateValue(
                document.getElementById('scoreDisplay'),
                parseInt(document.getElementById('scoreDisplay').innerText),
                Math.floor((r + t + v) / 3),
                500
            );

            const flyBody = document.getElementById('flyBody');
            const flyHead = document.getElementById('flyHead');
            if (state.body === 'bubble') {
                flyBody.className = "absolute top-[45%] left-4 w-36 h-6 rounded-full transition-all duration-500 origin-left bubble-texture";
                flyBody.style.filter = state.uvMode ? "brightness(1.5)" : "none";
            } else {
                flyBody.className = "absolute top-[45%] left-4 w-36 h-4 rounded-full transition-all duration-500 origin-left bg-slate-400";
                flyBody.style.filter = "none";
            }

            if (state.head === 'none') {
                flyHead.style.background = "transparent";
                flyHead.style.boxShadow = "none";
            } else if (state.head === 'green') {
                flyHead.style.background = state.uvMode ? "#39FF14" : "#22c55e";
                flyHead.style.boxShadow  = state.uvMode ? "0 0 20px #39FF14" : "none";
            } else {
                flyHead.style.background = state.uvMode ? "#ffffff" : "#f1f5f9";
                flyHead.style.boxShadow  = state.uvMode ? "0 0 20px cyan" : "none";
            }
        }

        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) window.requestAnimationFrame(step);
            };
            window.requestAnimationFrame(step);
        }

        window.addEventListener('load', () => {
            initChart();
            setBody('bubble');
            setHead('none');
            document.getElementById('uvToggle').addEventListener('change', toggleUVMode);
        });
    </script>
</body>
</html>
